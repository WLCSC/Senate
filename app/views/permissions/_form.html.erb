<%= form_for @permission do |f| %>
  <%= f.error_messages %>
  <% if @chamber %>
	<%= hidden_field_tag :permission_chamber_id, params[:chamber_id] %>
  <% else %>
    <%= f.label :Chamber %><br/>
	<%= select_tag :chamber_id, options_for_select(Chamber.all.map{|c| [c.name, c.id]}) %>
  <% end %>
  <table border=1>
  <tr>
  <td>
  <p>
    <%= f.label :comment %><br />
    <%= f.text_field :name %>
  </p>
  <p>
    <%= f.label :priority %><br />
    <%= f.text_field :priority, :size => 5 %>
	Numbers come before capital letters come before small letters!
  </p>
  </td><td>
  
    Applies to:
  <p>
	Group: <%= select_tag :principal_group, options_for_select(@groups.map{|g| [g.name, g.id]}) %></p>
	<p id="principal" style="display: inline;"><%= render :partial => 'principal_select', :locals => {:f => f} %></p>
	<%= javascript_tag do %>
	jQuery(function($) {
  // when the #search field changes
  $("#principal_group").change(function() {
    // make a POST call and replace the content
    $.get("/permissions/ajax_update_principals?principal_group="+$("#principal_group").val(), function(data) {
		$("#principal").html(data);
	});
  });
})
	<% end %>
  </td></tr></table>
  <table style="text-align: center;">
	<tr>
		<th colspan=""6">Permissions</th>
	</tr>
	<tr>
		<th>Read</th>
		<th>Comment</th>
		<th>Propose</th>
		<th>Remark</th>
		<th>Vote</th>
		<th>Administrate</th>
	</tr>
	<tr>
		<td><%= f.check_box :readable %></td>
		<td><%= f.check_box :commentable %></td>
		<td><%= f.check_box :proposable %></td>
		<td><%= f.check_box :remarkable %></td>
		<td><%= f.check_box :votable %></td>
		<td><%= f.check_box :administratable %></td>
	</tr>
  </table>
  
  <p><%= f.submit %></p>
<% end %>
